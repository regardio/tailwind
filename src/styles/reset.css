/**
 * CSS Reset
 * Browser normalization and cross-browser fixes only.
 * Design defaults belong in base.css
 *
 * @see https://www.joshwcomeau.com/css/custom-css-reset/
 */
@layer base {
  /* ============================================
   * BOX MODEL
   * ============================================ */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  /* Reset margin on all elements except dialog (uses margin: auto for centering) */
  *:not(dialog) {
    margin: 0;
  }

  /* Tailwind-compatible border reset */
  *,
  *::before,
  *::after {
    border-style: solid;
    border-width: 0;
  }

  /* Fix flex item overflow bug */
  * {
    min-width: 0;
  }

  /* ============================================
   * HTML ROOT
   * ============================================ */
  html {
    /* Prevent iOS text size inflation */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;

    /* System color scheme support */
    color-scheme: light dark;

    /* Enable height-based layouts */
    height: 100%;

    /* Consistent tab size */
    tab-size: 2;

    /* Better scroll anchoring */
    overflow-anchor: auto;

    /* Touch scroll momentum (iOS) */
    -webkit-overflow-scrolling: touch;
  }

  /* Enable keyword animations + smooth scroll only for users without motion sensitivity */
  @media (prefers-reduced-motion: no-preference) {
    html {
      interpolate-size: allow-keywords;
      scroll-behavior: smooth;
    }
  }

  html[data-theme="light"] {
    color-scheme: light;
  }

  html[data-theme="dark"] {
    color-scheme: dark;
  }

  /* ============================================
   * BODY
   * ============================================ */
  body {
    position: relative;
    min-height: 100%;
    margin: 0;

    /* Antialiased rendering (macOS browsers default to subpixel) */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* ============================================
   * FORM ELEMENTS
   * Inherit instead of browser defaults
   * ============================================ */
  input,
  button,
  textarea,
  select,
  optgroup {
    font: inherit;
    color: inherit;
    background-color: transparent;
  }

  /* Explicit input types for edge cases */
  [type="date"],
  [type="datetime-local"],
  [type="email"],
  [type="month"],
  [type="number"],
  [type="password"],
  [type="search"],
  [type="tel"],
  [type="text"],
  [type="time"],
  [type="url"],
  [type="week"],
  [multiple] {
    font: inherit;
    background-color: transparent;
  }

  /* Remove webkit search styling */
  [type="search"]::-webkit-search-decoration,
  [type="search"]::-webkit-search-cancel-button {
    -webkit-appearance: none;
  }

  /* Cursor normalization */
  button,
  [role="button"] {
    cursor: pointer;
  }

  button:disabled,
  [role="button"]:disabled,
  input:disabled,
  select:disabled,
  textarea:disabled {
    cursor: not-allowed;
  }

  /* ============================================
   * MEDIA ELEMENTS
   * ============================================ */
  img,
  picture,
  video,
  canvas,
  svg {
    display: block;
    flex-shrink: 0;
    max-width: 100%;
  }

  img,
  video {
    height: auto;
  }

  /* Icons inherit text color unless explicitly set */
  svg:not([fill]) {
    fill: currentColor;
  }

  iframe,
  embed,
  object {
    display: block;
    max-width: 100%;
  }

  /* ============================================
   * INTERACTIVE ELEMENTS
   * ============================================ */

  /* Focus only visible on keyboard navigation */
  :focus:not(:focus-visible) {
    outline: none;
  }

  /* Dialog normalization */
  dialog {
    padding: 0;
    border: none;
  }

  /* Summary/details normalization */
  summary {
    display: list-item;
    cursor: pointer;
  }

  summary::-webkit-details-marker {
    display: none;
  }

  /* Enforce hidden attribute */
  [hidden] {
    /* biome-ignore lint/complexity/noImportantStyles: Must always work */
    display: none !important;
  }

  /* Inert elements */
  [inert],
  [inert] * {
    pointer-events: none;
    user-select: none;
  }

  /* ============================================
   * TABLES
   * ============================================ */
  table {
    border-spacing: 0;
    border-collapse: collapse;
  }

  /* ============================================
   * LINKS
   * ============================================ */
  a {
    color: inherit;
    text-decoration: inherit;
  }

  a:not([class]) {
    text-decoration-skip-ink: auto;
  }

  /* ============================================
   * LISTS (Safari VoiceOver fix)
   * ============================================ */
  ul[role="list"],
  ol[role="list"] {
    padding: 0;
    list-style: none;
  }

  /* ============================================
   * STACKING CONTEXTS
   * ============================================ */
  #root,
  #__next,
  #app {
    isolation: isolate;
  }

  /* ============================================
   * MOBILE
   * ============================================ */
  * {
    -webkit-tap-highlight-color: transparent;
  }

  @media (pointer: coarse) {
    html {
      touch-action: manipulation;
    }
  }

  /* ============================================
   * ACCESSIBILITY - REDUCED MOTION
   * ============================================ */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      /* biome-ignore lint/complexity/noImportantStyles: Accessibility override */
      animation-duration: 0.01ms !important;
      /* biome-ignore lint/complexity/noImportantStyles: Accessibility override */
      animation-iteration-count: 1 !important;
      /* biome-ignore lint/complexity/noImportantStyles: Accessibility override */
      transition-duration: 0.01ms !important;
      /* biome-ignore lint/complexity/noImportantStyles: Accessibility override */
      scroll-behavior: auto !important;
    }
  }
}
